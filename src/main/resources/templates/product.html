<!doctype html>
<html lang="fr">
<html xmlns:th="http://www.thymeleaf.org">
<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">


	<link rel="stylesheet" type="text/css" href="../style_bt.css">
	<link rel="stylesheet" type="text/css" href="../../style_bt.css">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Inconsolata&family=Playfair+Display&family=Ubuntu:wght@300&display=swap" rel="stylesheet">

	<title>Ajouter-modifier un produit</title>
</head>

   <body>

   <header th:insert="_header::header"></header>
      <br>
      <div class="container text-center">
      	  <div th:if="${product.code == null}"><h3>Ajouter un nouveau Produit</h3></div>
      	  <div th:unless="${product.code == null}"><h3>Modifier le Produit</h3></div>
		  <br>
     		<form th:action="@{/products/save}" th:object="${product}"
     		method="post" enctype="multipart/form-data" style="max-width: 400px; margin: 0 auto;">
     	<!-- 	<input type="hidden" th:value="${product.code}"/> -->
     		<div>
				<p>
					<label>Code:</label>
					<input type="text" class="form-control" th:field="*{code}"/>
				</p>
				<p>
					<label>Name:</label>
					<input type="text" class="form-control" th:field="*{name}" required maxlength="10"/>
				</p>

				<p>
					<label >Prix:</label>
					<input type="number" class="form-control" th:field="*{price}" required />
				</p>


				<p>
					<label>Image:</label>
					<input type="file" class="form-control" name="picture" id="picture" accept="image/png, image/jpeg, image/jpg" required/>
				</p>
				<!--<p>
					<img id="thumbnail" alt="Image"/>
				</p>-->

				<p>
					<label >Sélectionner une catégorie :</label>

					<select  th:field="*{category}"  class="form-control" required>

						<th:block th:each="cat : ${listCategory}" >
							<option th:text="${cat.nameCategory}"
									th:value="${cat.idcategory}"/>
						</th:block>
					</select>
				</p>

				<p class="text-center">
					<input type="submit" value="Enregistrer" class="btn btn-success m-3" />
					<input type="button" value="Annuler" class="btn btn-danger "  />
				</p>
	     			
     			
     		</div>
     		
     		</form>
      
      
      
      </div>
      
      

     <!--  <div th:if="${errorMessage!= null}" class="error-message" th:utext="${errorMessage}">
      </div>
        -->
   <!--    <form  th:object="${product}" th:action="@{/admin/product}"
              method="POST" enctype="multipart/form-data">
              
         <div class="m-3">
              	<div class="form-group row">
					<label class="col-form-label col-sm-4">Code*:</label>
						<div class="col-sm-8">
							<input type="text" class="form-control" th:field="*{code}" required/>
						</div>
              	</div>
              	
              	<div class="form-group row">
					<label class="col-form-label col-sm-4">Nom*:</label>
						<div class="col-sm-8">
							<input type="text" class="form-control" th:field="*{name}" required/>
						</div>
              	</div>
              	
              	  	
              	<div class="form-group row">
					<label class="col-form-label col-sm-4">Prix*:</label>
						<div class="col-sm-8">
							<input type="text" class="form-control" th:field="*{price}" required/>
						</div>
              	</div>
              	<div class="form-group row">
					<label class="col-form-label col-sm-4">Categorie*:</label>
						<div class="col-sm-8">
							<select  class="form-control" th:field="*{category}" required>
							
								<th:block th:each="cat : ${listCategory}">
									<option th:text="${cat.nameCategory}" th:value="${cat.idcategory}"/>
								</th:block>
							</select>
					</div>
              	</div>
              	
              	  	
              	<div class="form-group row">
					<label class="col-form-label col-sm-4">Image*:</label>
						<div class="col-sm-8">
							<img th:src="@{${product.imageImgPath}}" />
						</div>
              	</div>
              	
              	<div class="form-group row">
					<label class="col-form-label col-sm-4">Telecharger*:</label>
						<div class="col-sm-8">
						<input type="file" class="form-control" name="picture" id="picture" accept="image/png, image/jpeg, image/jpg" required/>
					</div>
				
				
				</div>
				
              	
              	
          </div>
          <div class="text-center p-3">
					<button type="submit" class="btn btn-primary">Enregistrer</button>
				</div>
				
				<div class="text-center p-3">
					<button type="submit" class="btn btn-primary">Retour</button>
				</div> -->
         <!-- <table style="text-align:left;">
            <tr>
               <td>Code *</td>
               <td style="color:red;">
                  <input th:field="*{newProduct}" type="hidden" />
                  <input th:if="${productForm.newProduct}" type="text"
                     th:field="*{code}" />  
                  <th:block th:if="${!productForm.newProduct}">   
                       <span th:utext="${productForm.code}"></span>   
                       <input type="hidden" th:field="*{code}" />                                       
                  </th:block>   
               </td>
               <td>
                  <span class="error-message" th:if="${#fields.hasErrors('code')}" th:errors="*{code}">..</span>
               </td>   W
            </tr>
            <tr>
               <td>Nom *</td>
               <td><input th:field="*{name}"  /></td>
               <td>
                  <span class="error-message" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">..</span>
               </td>
            </tr>
            <tr>
               <td>Prix *</td>
               <td><input th:field="*{price}"  /></td>
               <td>
                  <span class="error-message" th:if="${#fields.hasErrors('price')}" th:errors="*{price}">..</span>
               </td>
            </tr>
            <tr>
               <td>Image</td>
               <td>
                  <img th:src="@{|/productImage?code=${productForm.code}|}" width="100"/>
               </td>
               <td> </td>
            </tr>
            <tr>
               <td>Télécharger l'image</td>
               <td><input type="file" th:field="*{fileData}" /></td>
               <td> </td>
            </tr>
            <tr>
               <td>&nbsp;</td>
               <td>
                  <input type="submit" value="Ajouter" />
                  <input type="reset" value="Retour" />
               </td>
            </tr>
         </table>
      </form> -->
       

       <script type="text/javascript">
      	$(document).ready(function(){
      	
      		$('#picture').change(function(){
      			showImageThumbnail(this);
      		});
      	
      	});
      	
      	function shwoImageThumbnail(fileInput) {
      		file = fileInput.files[0];
      		reader = new FileReader();
 
      		reader.onload = function(e){
      			$('#thumbnail').attr('src', e.target.result);
      		};
      		
      		reader.readAsDataURL(file);
      	}
      
      
      </script>
  <!--     
      <script >
      function confirmer(url){
		var rep=confir("Etes vous sure de vouloir supprimer?");
		if(rep==true){
			document.location=url;
		}
	}
      </script> -->

   <div th:insert="_footer::footer"></div>

   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
   <script type="text/javascript" src="js/main.js"></script>
   <script src="https://kit.fontawesome.com/3065d88318.js" crossorigin="anonymous"></script>

</body>
</html>
