<!doctype html>
<html lang="fr">
<html xmlns:th="http://www.thymeleaf.org">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <link rel="stylesheet" type="text/css" href="style_bt.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata&family=Playfair+Display&family=Ubuntu:wght@300&display=swap" rel="stylesheet">

    <title>Panier</title>
</head>
   <body>

   <header th:insert="_header::header"></header>
   <br>
      <h3>Mon panier</h3>
      
   <main>
    <div class="container">

        <!--Section: Block Content-->
        <section class="mt-5 mb-4">

            <!--Grid row-->
            <div class="row">

                <!--Grid column-->
                <div class="col-lg-8">

                    <!-- Card -->
                    <div class="card wish-list mb-4">
                        <div class="card-body">

                            <h5 class="mb-4">Cart (<span th:text="${cartCount}">2</span> produits)</h5>

                            <div class="row mb-4" th:each="item, iStat : ${cart}">
                                <div class="col-md-5 col-lg-3 col-xl-3">
                                    <div class="mb-3 mb-md-0">
                                        <img class="img-fluid w-100"
                                             th:src="@{${item.imageImagePath}}"
                                             src="https://mdbootstrap.com/img/Photos/Horizontal/E-commerce/Vertical/12a.jpg" alt="Sample">

                                    </div>
                                </div>
                                <div class="col-md-7 col-lg-9 col-xl-9">
                                    <div>
                                        <div class="d-flex justify-content-between">
                                            <div>
                                                <h5 th:text="${item.name}"></h5>
                                               		
<!--                                                <p class="mb-2 text-uppercase small">Category: <span th:text="${item.category.name}"></span></p>-->

                                            </div>

                                        </div>
                                        <div class="mt-5 d-flex justify-content-between align-items-center">
                                            <div>
                                                <a href="#!" th:href="@{/cart/removeItem/{index}(index=${iStat.index})}"  type="button" class="card-link-secondary small text-uppercase mr-3"><i
                                                        class="fas fa-trash-alt mr-1"></i> Supprimer </a>

                                            </div>
                                            <p class="mb-0"><span><strong>€<span th:text="${item.price}"></span></strong></span></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr class="mb-4">

                            <p class="text-primary mb-0"><i class="fas fa-info-circle mr-1"></i> Do not delay the purchase, adding
                                items to your cart does not mean booking them.</p>

                        </div>
                    </div>




                </div>
                <!--Grid column-->

                <!--Grid column-->
                <div class="col-lg-4">

                    <!-- Card -->
                    <div class="card mb-4">
                        <div class="card-body">

                            <h5 class="mb-3">Le montant total</h5>

                            <ul class="list-group list-group-flush">
                                <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">
                                   Montant à payé
                                    <span>€<span th:text="${total}"></span></span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                                   Livraison
                                    <span>Gratuit</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">
                                    <div>
                                        <strong>Le montant total avec</strong>
                                        <strong>
                                            <p class="mb-0">(TVA inclut)</p>
                                        </strong>
                                    </div>
                                    <span><strong>€<span th:text="${total}"></span></strong></span>
                                </li>
                            </ul>

                            <a th:href="@{/checkout}"  class="btn btn-success btn-block waves-effect waves-light">Valider votre achat</a>

                        </div>
                    </div>
                    <!-- Card -->

                    <!-- Card -->
                    <div class="card mb-4">
                        <div class="card-body">

                            <a class="btn btn-primary btn-block waves-effect waves-light" th:href="@{/}"
                               aria-expanded="false" aria-controls="collapseExample">
                               Continuer les achats
                            </a>

                            <div class="collapse" id="collapseExample">
                                <div class="mt-3">
                                    <div class="md-form md-outline mb-0">
                                        <input type="text" id="discount-code" class="form-control font-weight-light"
                                               placeholder="Enter discount code">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Card -->

                </div>
                <!--Grid column-->

            </div>
            <!--Grid row-->

        </section>
        <!--Section: Block Content-->

    </div>
</main>
<!--Main layout-
       
      <!-- <th:block th:if="${cartItem == null || cartItem.cartLines == null || cartForm.cartLines.empty}"> -->
           <!-- <th:block th:if="${cartItem == null"> -->
      <!--    <h2>Votre panier est vide !!!</h2>
         <a th:href="@{/productList}">Voir les produits</a> -->
         
      <!--    <div class="form-row justify-center">
         	<div class="col-lg-7">
         	
         		<div class="card mt-2 ml-5">
         			
					<div class="car-body">
						<table class="table">
							<tr>
								<th>Nom</th>
								<th>Prix</th>
								<th>Catégorie</th>
								<th>Photo</th>
							</tr>
					
							<tr th:each="prodInfo : ${listProductCart}">
								<td th:text="${prodInfo.name}"></td>
								<td th:text="${prodInfo.price}"></td>
								<td th:text="${prodInfo.category.nameCategory}"></td>
								<td><img th:src="@{${prodInfo.imageImagePath}}" width="150" height="150" /></td>
								
								<td> <a 
									onclick="javascript:return confirm('Êtes-vous sûre de vouloir supprimer ce produit?')"
									class="btn btn-danger"
									th:href="@{|/shoppingCartRemoveProduct?code=${prodInfo.code}|}"></a>Supprimer</td>
							</tr>
						</table>
				
					</div>         		
         		</div> 	
         	</div>
     
         </div>
         
         Recapitulatif
         
          <div class="col-lg-4">
         	<div class="cart-mt-1 m1-5">
         	
         		<div class="car-body">
         			<table class="table" id="table_Recap">
         				<tr>
         					<th colspan="2">RECAPITULATIF</th>
         				</tr>
         				
         				<tr>
         					<td>Panier</td>
         					<td><span th:text="${totalPrice} + '€'"></span></td>
         				
         				</tr>
         				<tr>
         					<td>Frais de livraison</td>
         					<td> Gratuit</td>
         				
         				</tr>
         			
         				<tr>
         					<td style="font-weight: bold;">TOTAL</td>
         					<td style="font-weight: bold;"><span  th:text="${totalPrice} + '€'"></span></td>
         				
         				</tr>
         			
         			</table>
         		</div>
         </div>
       </div>
           Pagination
  <ul class="pagination justify-content-center">
  	<ul class="nav nav-pills">
  		<li class="page-item"><a class="page-link"
  		 href="#" tabindex="-1">Précédent</a></li>
  		 <li th:each="page, status:${page}">
  		 <a 
  		 th:class="${status.index==currentPage?'btn btn-secondary':'btn'}"
  		 th:href="@{products(page=${status.index}, size=${size}, name=${name})}"
  		 th:text="${status.index+1}"></a>
  		</li>
  		<li class="page-item"><a class="page-link" href="#">Suivant</a>
  		
  		</li>
  	</ul>
  
  </ul>
          -->
         
      <!-- </th:block>
       
      <th:block th:if="${cartItem!= null }">
         <form method="POST" th:object="${cartItem}" th:action="@{/shoppingCart}">
          
               <div class="product-preview-container"
                        th:each="cartLineInfo, varStatus : ${cartForm.cartLines}">
                  <ul>
                     <li><img class="product-image"
                        th:src="@{|/productImage?code=${cartLineInfo.productInfo.code}|}" />
                     </li>
                     <li>Code: <span th:utext="${cartLineInfo.productInfo.code}"></span>
                        <input type="hidden"      
                           th:name="|cartLines[${varStatus.index}].productInfo.code|"                       
                           th:value="${cartLineInfo.productInfo.code}" />
                     </li>
                     <li>Nom: <span th:utext="${cartLineInfo.productInfo.name}"></span></li>
                     <li>Prix:
                        <span class="price"
                           th:utext="${#numbers.formatDecimal(cartLineInfo.productInfo.price,3,2,'COMMA')}">
                        </span>
                     </li>
                     <li>Quantité:
                        <input
                            th:name="|cartLines[${varStatus.index}].quantity|"
                            th:value="${cartLineInfo.quantity}" />
                     </li>
                     <li>Sous_total:
                        <span class="subtotal"
                           th:utext="${#numbers.formatDecimal(cartLineInfo.amount,3,2,'COMMA')}">
                        </span>
                     </li>
                     <li>
                        <a th:href="@{|/shoppingCartRemoveProduct?code=${cartLineInfo.productInfo.code}|}">
                        Supprimer
                        </a>
                     </li>
                  </ul>
               </div>
             
            <div style="clear: both"></div>
            <input class="button-update-sc" type="submit" value="Mettre à jour la quantité" />
            <a class="navi-item"
               th:href="@{/shoppingCartCustomer}">Entrer vos informations</a>
            <a class="navi-item"
               th:href="@{/productList}">Continuer les achats</a>
         </form>
      </th:block> -->

   <div th:insert="_footer::footer"></div>

   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
   <script type="text/javascript" src="js/main.js"></script>
   <script src="https://kit.fontawesome.com/3065d88318.js" crossorigin="anonymous"></script>
       
   </body>
</html>